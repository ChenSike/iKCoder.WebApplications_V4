<!DOCTYPE html>
<html style="height:100%">
<head>
    <title></title>
    <meta charset="utf-8" />
    <script src="javascript/common/jquery-3.2.1.min.js"></script>
    <script src="javascript/common/xmloperator.js"></script>
    <script src="javascript/common/common.js"></script>
    <script src="javascript/common.js"></script>
    <script src="javascript/common/three.min.js"></script>
    <script src="javascript/common/TweenMax.min.js"></script>
</head>
<body style="height:100%;">
    <div id="game_container" style="width:100%;height:100%;"></div>
    <script type="text/javascript">
        var _shareData = null;
        $(document).ready(function () {
            _registerRemoteServer();
            $.ajax({
                type: 'GET',
                async: true,
                url: _getRequestURL(_gURLMapping.share.shareload, { symbol: getQueryString('symbol') }),
                data: '',
                success: function (response, status) {
                    if ($(response).find('err').length > 0) {
                        _showGlobalMessage($(response).find('err').attr('msg'), 'danger', 'alert_Share_Load');
                        return;
                    }

                    _shareData = $($($(response).find('msg')[0]).attr('msg'))[0];
                    var libItems = $(_shareData).find('lib').find('item');
                    var libs = [];
                    for (var i = 0; i < libItems.length; i++) {
                        libs.push($(libItems[i]).attr('src'));
                    }

                    LoadLib(libs);
                },
                dataType: 'xml',
                xhrFields: {
                    withCredentials: true
                },
                error: function () {
                }
            });
        });

        function LoadLib(lib) {
            if (lib.length > 0) {
                $.getScript(lib[0], function () {
                    lib.shift();
                    LoadLib(lib);
                });
            }
        }
    </script>
</body>
</html>
